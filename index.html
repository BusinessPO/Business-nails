<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Inicio - Business Nails</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      text-align: center;
      background: #f8f8f8;
    }
    h1 {
      color: #ff1493;
    }
    .boton {
      display: inline-block;
      margin: 10px;
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background-color: #ff69b4;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .boton:hover {
      background-color: #ff1493;
    }
    .form-cancelar {
      margin-top: 30px;
      background: white;
      padding: 20px;
      display: inline-block;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    input {
      padding: 10px;
      width: 250px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<h1>Business Nails</h1>

<button class="boton" onclick="window.location.href='catalogo.html'">Cat치logo</button>
<button class="boton" onclick="alert('Para agendar primero selecciona un dise침o en el cat치logo y luego regresa aqu칤 a agendar.')">Agendar</button>

<!-- Formulario para cancelar cita -->
<div class="form-cancelar">
  <h2>Cancelar cita</h2>
  <form id="formCancelar">
    <input type="text" id="nombreCancelar" placeholder="Nombre registrado" required /><br>
    <input type="text" id="apellidoCancelar" placeholder="Apellido registrado" required /><br>
    <input type="date" id="fechaCancelar" required /><br>
    <button type="submit" class="boton">Cancelar cita</button>
  </form>
</div>

<script>
  const formCancelar = document.getElementById("formCancelar");

  formCancelar.addEventListener("submit", function(e) {
    e.preventDefault();

    const nombre = document.getElementById("nombreCancelar").value.trim().toLowerCase();
    const apellido = document.getElementById("apellidoCancelar").value.trim().toLowerCase();
    const fecha = document.getElementById("fechaCancelar").value;

    let citas = JSON.parse(localStorage.getItem("citasConfirmadas") || "[]");
    const index = citas.findIndex(cita => 
      cita.nombre.toLowerCase() === nombre &&
      cita.apellido.toLowerCase() === apellido &&
      cita.fecha === fecha
    );

    if (index === -1) {
      alert("No se encontr칩 una cita confirmada con esos datos.");
      return;
    }

    const hoy = new Date();
    const fechaCita = new Date(fecha);
    const diferenciaDias = Math.floor((fechaCita - hoy) / (1000 * 60 * 60 * 24));

    if (diferenciaDias < 2) {
      alert("Solo puedes cancelar una cita con al menos 2 d칤as de anticipaci칩n.");
      return;
    }

    const citaCancelada = citas.splice(index, 1)[0];
    localStorage.setItem("citasConfirmadas", JSON.stringify(citas));
    alert("Tu cita ha sido cancelada.");

    // Enviar mensaje por WhatsApp
    const mensaje = `游뛂 CANCELACI칍N DE CITA\nNombre: ${citaCancelada.nombre} ${citaCancelada.apellido}\nFecha: ${citaCancelada.fecha}\nHora: ${citaCancelada.hora}`;
    const whatsapp = "https://wa.me/523338093018?text=" + encodeURIComponent(mensaje);
    window.open(whatsapp, "_blank");
  });
</script>

</body>
</html>
